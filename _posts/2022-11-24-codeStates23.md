---
layout: single
title: "[Node Js] fetch() ê³¼ì œ"
categories: JavaScript
tags: [ JS, CodeStates]
toc: true


---

### 2022.11.24

### ğŸ’¡  ì˜¤ëŠ˜ì˜ JavaScript ê³µë¶€ 

#### â–¶ï¸ fetch API

![ezgif com-gif-maker (1)](https://user-images.githubusercontent.com/104547038/203699628-07e404ef-5868-48a4-964d-4cc6f38b3c3b.gif)

ìš°ë¦¬ê°€ ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ì‚¬ì´íŠ¸ë“¤ì€ ì‹œì‹œê°ê° ë³€í•˜ëŠ” ì •ë³´ë“¤ê³¼ ëŠ˜ ê³ ì •ì ì¸ ì •ë³´ë“¤ì´ ë”°ë¡œ ë¶„ë¦¬ë˜ì–´ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ì¤‘ì—ì„œ ë‚ ì”¨, ì¦ì‹œ, ìµœì‹  ë‰´ìŠ¤ë“±ì´ ë°”ë¡œ ë™ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì•„ì•¼ í•˜ëŠ” ì •ë³´ì´ë‹¤. 

ë§ì€ ì›¹ì‚¬ì´íŠ¸ë“¤ì—ì„œëŠ” í•´ë‹¹ ì •ë³´ë§Œ ì—…ë°ì´íŠ¸í•˜ê¸° ìœ„í•´ ìš”ì²­ APIë¥¼ ì´ìš©í•œë‹¤. ê·¸ì¤‘ ëŒ€í‘œì ì¸ fetchAPIë¥¼ ê³µë¶€í•´ë³´ì•˜ë‹¤. 

##### ğŸ“Œ fetch API ê¸°ë³¸êµ¬ì¡°

```js
let url =
  "https://koreanjson.com/posts/1";
fetch(url)
  .then((response) => response.json())
  .then((json) => console.log(json))
  .catch((error) => console.log(error));
```

**ì–´ì œì™€ ë§ˆì°¬ê°€ì§€ë¡œ ìš”ì²­ì˜ ê²°ê³¼ë¥¼ í•˜ë‚˜ì˜ ê°ì²´ë¡œ í•©ì¹˜ëŠ” ê²ƒ**

##### ğŸ•¹basicChaining.js

```js
const { response } = require('express');

const newsURL = 'http://localhost:4999/data/latestNews';
const weatherURL = 'http://localhost:4999/data/weather';

function getNewsAndWeather() {
  // TODO: fetchì„ ì´ìš©í•´ ì‘ì„±í•©ë‹ˆë‹¤
  // TODO: ì—¬ëŸ¬ê°œì˜ Promiseë¥¼ thenìœ¼ë¡œ ì—°ê²°í•˜ì—¬ ì‘ì„±í•©ë‹ˆë‹¤
  return fetch(newsURL)    // newsURL ë°›ì•„ì™€ì„œ 
    .then((response) => response.json())  // JSON í˜•íƒœë¡œ ë³€í™˜ì‹œí‚´
    .then((json1) => {      //  ê·¸ ê²°ê³¼ë¥¼ json1ì— ë‹´ì•˜ê³ 
      return fetch(weatherURL)  // weatherURLì„ ê°€ì ¸ì™€ì„œ 
      .then((response) => response.json())  // JSON í˜•íƒœë¡œ ë³€í™˜ì‹œí‚´
      .then((json2) => {  // ê·¸ ê²°ê³¼ë¥¼ json2ì— ë‹´ì•˜ê³  
        return {
          news: json1.data, 
          weather : json2
        }  // ê°ì²´ë¡œ í•©ì¹¨
      })
    })
  }
```

ë¶„ëª… ë¬´ì–¸ê°€ ì˜ëª»ë˜ì—ˆë‹¤ê³  í•˜ë”ë¼ë„ í•˜ë‚˜ë„ í†µê³¼ë˜ì§€ ì•Šì„ë¦¬ê°€ ì—†ëŠ”ë° ê³„ì†í•´ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤. 

![ìŠ¤í¬ë¦°ìƒ· 2022-11-24 14 41 13](https://user-images.githubusercontent.com/104547038/203703132-b6d3954f-2c2d-47b0-8e46-b7bf6d62c4a5.png)

ì´ìœ ë¥¼ ê³„ì†í•´ì„œ ì°¾ì§€ ëª»í•˜ê³  ì—´ë§Œ ë°›ì•„ ìˆë‹¤ê°€ í•¨ê»˜ ì½”ë“œë¥¼ ì§°ë˜ í˜ì–´ë‹˜ì´ ì„ ì–¸ëœ newsURL, weatherURLë§ê³  fetchì— ë°”ë¡œ ì£¼ì†Œë¥¼ ì…ë ¥í•´ë³´ë¼ê³  í•˜ì…¨ë‹¤. 

ê·¸ ê²°ê³¼ 

##### ğŸ•¹basicChaining.js

```js
function getNewsAndWeather() {
  // TODO: fetchì„ ì´ìš©í•´ ì‘ì„±í•©ë‹ˆë‹¤
  // TODO: ì—¬ëŸ¬ê°œì˜ Promiseë¥¼ thenìœ¼ë¡œ ì—°ê²°í•˜ì—¬ ì‘ì„±í•©ë‹ˆë‹¤
  return fetch('http://localhost:4999/data/latestNews')    // newsURL ë°›ì•„ì™€ì„œ 
    .then((response) => response.json())  // JSON í˜•íƒœë¡œ ë³€í™˜ì‹œí‚´
    .then((json1) => {      //  ê·¸ ê²°ê³¼ë¥¼ json1ì— ë‹´ì•˜ê³ 
      return fetch('http://localhost:4999/data/weather')  // weatherURLì„ ê°€ì ¸ì™€ì„œ 
      .then((response) => response.json())  // JSON í˜•íƒœë¡œ ë³€í™˜ì‹œí‚´
      .then((json2) => {  // ê·¸ ê²°ê³¼ë¥¼ json2ì— ë‹´ì•˜ê³  
        return {
          news: json1.data, 
          weather : json2
        }  // ê°ì²´ë¡œ í•©ì¹¨
      })
    })
  }
```

![ìŠ¤í¬ë¦°ìƒ· 2022-11-24 14 32 33](https://user-images.githubusercontent.com/104547038/203702049-d44a7ac0-f43f-480b-a013-18eb2d737f60.png)

í•˜... ë­ê°€ ë¬¸ì œì¸ì§€ ëª¨ë¥´ê² ì§€ë§Œ ... ì£¼ì†Œë¥¼ ì œëŒ€ë¡œ ì½ì–´ì˜¤ì§€ ëª»í–ˆë˜ ê²ƒ ê°™ã„·ã…... ìš°ì„  í•´ê²°í–ˆìœ¼ë‹ˆ ë‹¤ìŒë¬¸ì œ 

##### ğŸ•¹PromiseAll.js

```js
function getNewsAndWeatherAll() {
  // TODO: Promise.allì„ ì´ìš©í•´ ì‘ì„±í•©ë‹ˆë‹¤
  // 1ë‹¨ê³„ : Promise.allë¡œ fetch ë°ì´í„° ë°›ì•„ì˜¤ê¸° 
  // 2ë‹¨ê³„ : jsonìœ¼ë¡œ ë³€í™˜í•˜ê¸° 
  return Promise.all([
    fetch('http://localhost:4999/data/latestNews') // 1ë‹¨ê³„
    .then(response => response.json()), // 2ë‹¨ê³„
    fetch('http://localhost:4999/data/weather') // 1ë‹¨ê³„
    .then(response => response.json())  // 2ë‹¨ê³„
  ])
  .then((values) => {  // í˜„ì¬ valuesì—ëŠ” ë°°ì—´ì˜ í˜•íƒœë¡œ newsURLê³¼ weatherURLì´ ë³‘ë ¬ë¡œ ë‹´ê²¨ìˆìŒ 
    return {  // ê·¸ë˜ì„œ indexë¥¼ í™œìš©í•´ì„œ ì‚¬ìš©
      news: values[0].data,
      weather: values[1]
    }
  })
}
```

##### ğŸ•¹asyncAwait.js

```js
async function getNewsAndWeatherAsync() {
  // TODO: async/await í‚¤ì›Œë“œë¥¼ ì´ìš©í•´ ì‘ì„±í•©ë‹ˆë‹¤
  const news = await fetch('http://localhost:4999/data/latestNews')
  .then((response) => response.json())
  const weather = await fetch('http://localhost:4999/data/weather')
  .then((response) => response.json())
  return {news: news.data , weather: weather}
}
```

ê²°ë§ì€ ë§¤ìš° ê°œìš´í•˜ê³  í–‰ë³µí–ˆë‹¤... ã…

![ìŠ¤í¬ë¦°ìƒ· 2022-11-24 14 39 22](https://user-images.githubusercontent.com/104547038/203702913-b00bfba2-7315-4a6d-8385-7faf3e6cae84.png)

